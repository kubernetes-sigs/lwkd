# Latest Releases for the week 2024-10-21 - 2024-10-28   
## kubernetes-sigs/kubebuilder  
### Release notes for v4.3.0  
#### [kubebuilder v4.3.0](https://github.com/kubernetes-sigs/kubebuilder/releases/tag/v4.3.0)  
#### 2024-10-22  
## âš ï¸ Important Notice:

**(Only projects using webhooks are impacted by)**

Controller runtime has deprecated the `webhook.Validator` and `webhook.Defaulter` interfaces, and they will no longer be provided in future versions. Therefore, projects must adopt the new `CustomValidator` and `CustomDefaulter` interfaces to remain compatible with [controller-runtime](https://github.com/kubernetes-sigs/controller-runtime) `v0.20.0` and upper versions. For more details, refer to [controller-runtime/issues/2641](https://github.com/kubernetes-sigs/controller-runtime/issues/2641).

**Furthermore, webhooks should no longer reside under the `api` directory. Instead, they should be relocated to `internal/webhook`. For now, you can scaffold webhooks in the legacy path (under `api`) by using the command `kubebuilder create webhook [OPTIONS] --legacy=true`, which scaffolds using the `CustomValidator` and `CustomDefaulter` interfaces. However, please note that this flag is deprecated and will be removed in upcoming releases.**

### Steps to Migrate:

1. **Move Webhook Files to the Internal Directory:**

   Depending on your project structure, move the webhook files:

   - **Single Group Layout:** Move from `api/<version>` to `internal/webhook/<version>`.

     **Before:**
     ```
     api/
     â”œâ”€â”€ <version>/
     â”‚   â”œâ”€â”€ <kind>_webhook.go
     â”‚   â”œâ”€â”€ <kind>_webhook_test.go
     â”‚   â””â”€â”€ webhook_suite_test.go
     ```

     **After:**
     ```
     internal/
     â”œâ”€â”€ webhook/
     â”‚   â””â”€â”€ <version>/
     â”‚       â”œâ”€â”€ <kind>_webhook.go
     â”‚       â”œâ”€â”€ <kind>_webhook_test.go
     â”‚       â””â”€â”€ webhook_suite_test.go
     ```

   - **Multigroup Layout:** Move from `api/<group>/<version>` to `internal/webhook/<group>/<version>`.

     **Before:**
     ```
     api/
     â”œâ”€â”€ <group>/
     â”‚   â””â”€â”€ <version>/
     â”‚       â”œâ”€â”€ <kind>_webhook.go
     â”‚       â”œâ”€â”€ <kind>_webhook_test.go
     â”‚       â””â”€â”€ webhook_suite_test.go
     ```

     **After:**
     ```
     internal/
     â”œâ”€â”€ webhook/
     â”‚   â””â”€â”€ <group>/
     â”‚       â””â”€â”€ <version>/
     â”‚           â”œâ”€â”€ <kind>_webhook.go
     â”‚           â”œâ”€â”€ <kind>_webhook_test.go
     â”‚           â””â”€â”€ webhook_suite_test.go
     ```

2. **Update Imports:**

   After moving the files, ensure that all references to webhooks are updated in your `main.go` and other files. For example, update the import:

   - **Before:**
     ```go
     import "your_project/api/v1"
     ```

   - **After:**
     ```go
     import "your_project/internal/webhook/v1"
     ```

3. **Replace Deprecated Interfaces with Custom Ones:**

   Replace `webhook.Validator` and `webhook.Defaulter` with the new `CustomValidator` and `CustomDefaulter` interfaces:

   - **Before:**
     ```go
     var _ webhook.Validator = &MyResource{}

     func (r *MyResource) ValidateCreate() error { ... }
     func (r *MyResource) ValidateUpdate() error { ... }
     func (r *MyResource) ValidateDelete() error { ... }

     var _ webhook.Defaulter = &MyResource{}

     func (r *MyResource) Default() { ... }
     ```

   - **After:**
     ```go
     var _ webhook.CustomValidator = &MyResource{}

     func (v *MyResource) ValidateCreate(ctx context.Context, obj runtime.Object) (admission.Warnings, error) {
         myResource, ok := obj.(*MyResource)
         if !ok { return nil, fmt.Errorf("expected MyResource, got %T", obj) }
         return nil, validateMyResource(myResource)
     }

     func (v *MyResource) ValidateUpdate(ctx context.Context, oldObj, newObj runtime.Object) (admission.Warnings, error) {
         myResource, ok := newObj.(*MyResource)
         if !ok { return nil, fmt.Errorf("expected MyResource, got %T", newObj) }
         return nil, validateMyResource(myResource)
     }

     func (v *MyResource) ValidateDelete(ctx context.Context, obj runtime.Object) (admission.Warnings, error) {
         myResource, ok := obj.(*MyResource)
         if !ok { return nil, fmt.Errorf("expected MyResource, got %T", obj) }
         return nil, nil
     }

     var _ webhook.CustomDefaulter = &MyResource{}

     func (d *MyResource) Default(ctx context.Context, obj runtime.Object) error {
         myResource, ok := obj.(*MyResource)
         if !ok { return fmt.Errorf("expected MyResource, got %T", obj) }
         // Defaulting logic
         return nil
     }
     ```

**Example:** See the tutorial: [CronJob Webhook Example](https://github.com/kubernetes-sigs/kubebuilder/tree/master/docs/book/src/cronjob-tutorial/testdata/project/internal/webhook/v1).

**Note:** You might want to use the [Upgrade Assistance](https://book.kubebuilder.io/reference/rescaffold) to re-scaffold your project and then apply your code changes on top, ensuring that all necessary updates are addressed. Also,

## âš ï¸ Breaking Changes

* **(Only projects using webhooks are impacted by)** **(go/v4):** Replaced the deprecated `webhook.Validator` and `webhook.Defaulter` interfaces with `CustomValidator` and `CustomDefaulter`. Projects using the old interfaces must migrate to ensure compatibility with future versions. (#4060)
* **(Only projects using webhooks are impacted by)** **(go/v4):** Webhooks are now decoupled from the API directory. Webhook files should be moved from `api/<version>` or `api/<group>/<version>` to `internal/webhook/<version>` or `internal/webhook/<group>/<version>`. This restructuring improves project organization. (#4150)
* **(Impact only for library users):** Removed the `APIPackagePathLegacy` method, which has been obsolete since release 4.0.0. This change cleans up unused code. (#4182)
* **(Impact only for library users):** cleanup/refactor: Alpha Generate command. Move code source implementation to internal since this alpha feature is not designed to be imported by other tools (#4180)
* **(Impact only for library users):** Removed the redundant `HasFragment` method, favoring `HasFileContentWith` to reduce duplication and simplify the codebase. (#4191)

## âœ¨ New Features

* **(go/v4):** Added DevContainer support, making development in environments like GitHub Workspaces easier by removing the need for local setup. (#4078)
* **(go/v4):** The e2e test scaffolding has been improved with a comprehensive set of tests under `e2e/tests`, covering the manager and webhooks. These tests are designed to fail when not run against clusters using [Kind](https://kind.sigs.k8s.io/), and they avoid re-installing Prometheus and Cert-Manager if already present. See the final scaffolded tests in the samples under testdata [here](https://github.com/kubernetes-sigs/kubebuilder/blob/master/testdata/project-v4/test/e2e/e2e_test.go). Key improvements include:
  - Added checks to detect existing Prometheus and Cert-Manager installations to prevent re-installation. (#4117)
  - Enhanced e2e tests to ensure proper execution with Kind and clarified usage. (#4106)
  - Ensured `make manifests` and `make generate` are run as part of the e2e tests. (#4122)
  - Aligned `make test-e2e` with `make test` for consistent behavior. (#4125)
  - Improved tests to validate metrics endpoints and ensure proper metric exposure, including guidance for using metrics in reconciliation validation. (#4131)
  - Added support for scaffolded e2e webhook tests with the `+kubebuilder:scaffold:e2e-webhooks-checks` marker. (#4121)
  - Simplified Gomega assertions for better readability and improved error handling and logging in `e2e/test.go`. (#4141, #4158, #4166, #4175)
* **(go/v4):** Improved the webhook tests by adding examples. Also, enhanced the CronJob tutorial to clarify usage and validate changes. (#4130)
* **(deploy-image/v1alpha):** Improved the tests scaffolded for controllers to ensure better coverage. (#4197)
* **(go/v4):** Added support for scaffolding controllers and webhooks for External Types, making it easier to work with external resources in projects. (#4171, #4203, #4217)
* **(go/v4):** Add Support for Scaffolding Webhooks for Core Types (#4210)
* **(go/v4):** Upgraded the cert-manager version used in tests from `v1.14.4` to `v1.16.0` for better compatibility and features. (#4209)
* **(deploy-image/v1-alpha1):** Added comments to clarify how resource watching and reconciliation logic works in the scaffolded code. (#4102)
* **(go/v4):** Upgrade controller-tools version from v0.16.1 to v0.16.4 (#4215)
* **(go/v4):** Upgrade Prometheus Operator version used on the tests from v0.72.0 to 0.77.1 (#4212)

## ğŸ› Bug Fixes

* **(deploy-image/v1-alpha1):** Corrected a typo, replacing `typeNamespaceName` with `typeNamespacedName` to ensure accurate variable naming. (#4100)
* **(deploy-image/v1-alpha1):** Fixed sample code to apply correct labels to resources, improving consistency in the scaffolded examples. (#4101)
* **(go/v4):** Resolved linter issues in the scaffold, adding `nolint` where necessary to prevent failures for specific cases that should not fail during checks. (#4111)
* **(deploy-image/v1-alpha1):** Addressed additional linter issues to enhance code quality. (#4112)
* **(go/v4):** Fixed linter issues to pass stricter checks like `godot`, `gofumpt`, and `nlreturn`, ensuring better code formatting and style. (#4133)
* **(go/v4):** Removed duplicate webhook names in multi-version APIs, resolving conflicts when using the same webhook names across different API versions. (#4145)
* **(go/v4):** Improved webhook test templates by adding examples, providing clearer guidance for testing webhooks. (#4151)
* **(go/v4):** Ensured unique controller names to fix naming conflicts in multigroup layouts, improving support for projects with multiple groups. (#4162)
* **(go/v4):** Fixed the `HasResource` package method to stop once a match is found, improving performance and accuracy in resource handling. (#4190)
* **(go/v4, kustomize/v2):** Simplified scaffold by removing `webhookcainjection_patch` and clarified the use of cert-manager as a replacement. (#4123)
* **(go/v4, kustomize/v2):** fixed Duplicate Webhook Patch Entries when Creating Multiple Versions (#4220)

## What's Changed
* âœ¨ (go/v4): Added DevContainer support for seamless development in environments like GitHub Workspaces without local setup. by @TAM360 in https://github.com/kubernetes-sigs/kubebuilder/pull/4078
* :book: Update docs support by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4058
* :book: update the next step from quick start accordingly by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4092
* :book: provide better info about usage of kind by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4091
* :book: Minor Documentation Improvements: Add Links, Fix Typos, and Clarify Instructions by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4093
* ğŸŒ± (ci) - Fix the job to check the PR title and no longer use deprecated github action by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4095
* ğŸŒ± ci: Normalize text-based emoji codes to actual emojis in PR title checker by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4097
* ğŸŒ± move pr title checker to be under test with ther others checks by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4099
* :bug: (deploy-image/v1-alpha1): Fix typo issue by replacing typeNamespaceName with typeNamespacedName by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4100
* :book: remove warning note which was valid for old k8s versions by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4098
* :bug: (deploy-image/v1-alpha1): Fix sample by ensuring the right labels by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4101
* :book: remove notes about crd-version and webhook-version flags which are no longer supported and provided  by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4104
* :book: fix link for reference doc to manager and crd scopes by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4105
* :seedling: Bump actions/checkout from 3 to 4 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4108
* :seedling: Bump github.com/onsi/ginkgo/v2 from 2.20.0 to 2.20.1 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4107
* ğŸ›  (go/v4): Fix linter issues in the scaffold  by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4111
* ğŸ› (deployimage/v1apha1): fix linter issues by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4112
* ğŸŒ± ci: fix e2e tests for samples by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4114
* :sparkles: (go/v4) e2e tests: improve e2e tests and make test-e2e target by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4106
* ğŸŒ± ci: no longer call github actions for changes which are only made in the docs files (*/*.md) by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4115
* ğŸŒ±  ci- cleanup lint samples by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4113
* ğŸ› (go/v4): fix test e2e by ensuring that make manifests and generate are executed as part of the tests by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4122
* ğŸŒ± ci: fix GitHub action to test make test-e2e for deploy-image by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4118
* âœ¨ (go/v4):Added checks in the e2e test scaffolds to determine if Prometheus and/or CertManager are already installed on the cluster and avoid re-installation. by @Adembc in https://github.com/kubernetes-sigs/kubebuilder/pull/4117
* ğŸ› fix: ensure that make test-e2e call the same targets of make test by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4125
* :sparkles: (deploy-image/v1-alpha1): Add comments to clarify resource watching and reconciliation logic by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4102
* âš ï¸ : (go/v4): Replace usage of deprecated webhook.Validator and webhook.Defaulter interfaces by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4060
* :seedling: Bump github.com/onsi/ginkgo/v2 from 2.20.1 to 2.20.2 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4127
* ğŸ“– Improve and Simplify the Getting Started Guide by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4094
* ğŸ“–  update and supplement webhook documentation with example to work with core types by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4061
* :seedling: Bump github.com/onsi/gomega from 1.34.1 to 1.34.2 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4128
* ğŸŒ± fix testdata/project-v4 samples by removing call to generate Lakers controller without resource by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4129
* :sparkles: (go/v4) Add Metrics Validation and Helper Functions to E2E Tests by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4131
* ğŸ› (go/v4): fix linter issues to allow pass in the stricter linter checks such as; godot, gofumpt, nlreturn by @pgaxatte in https://github.com/kubernetes-sigs/kubebuilder/pull/4133
* âœ¨ (go/v4): improve the webhook tests by adding examples. Also, improve cronjob tutorial to clarify its usage and validate the changes by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4130
* :sparkles: (go/v4) Add scaffold for e2e webhook checks by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4121
* ğŸŒ± cleanup: Replace "-m=64" with "--memory-limit=64" by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4136
* :book: update multi-version with the latest changes and address fixes by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4139
* ğŸŒ± cleanup plugin_cluster-test.go by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4137
* âœ¨ (go/v4): cleanup: in e2e/test.go, make Gomega assertions more concise by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4141
* ğŸ“– cleanup: improves cronjob_controller_test.go gomega assertions by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4142
* ğŸ› (go/v4) resolve duplicate webhook name issue in multi-version API by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4145
* ğŸŒ± Automatically update the multiversion tutorial by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4138
* ğŸŒ± ci: add ci job to run the e2e tests for the samples used in the tutorâ€¦ by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4147
* :seedling: Bump golang.org/x/text from 0.17.0 to 0.18.0 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4152
* :seedling: Bump golang.org/x/tools from 0.24.0 to 0.25.0 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4153
* ğŸ› Enhances the webhook test template. by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4151
* ğŸŒ± cleanup: simplify and consolidate testdata samples by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4126
* ğŸŒ± cleanup: simplify and consolidate testdata samples #4126 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4157
* ğŸ“– fix marker for webhook server in the tutorial samples and position of explanations by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4155
* ğŸŒ± add better coverage to pkg/machinery/marker by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4156
* :bug: (go/v4): Refactor e2e-tests for clearer error handling and readable logs by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4158
* :bug: fix: ensure unique controller names to fix name conflicts in multigroup setup by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4162
* ğŸŒ± ci:  add e2e tests for multigroup testdata layout and rename sample by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4154
* ğŸ“– Simplify event recording example by @rkosegi in https://github.com/kubernetes-sigs/kubebuilder/pull/4165
* :sparkles: (go/v4) Add GitHub Actions by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4110
* ğŸ› (go/v4): Follow -up: Refactor e2e-tests for clearer error handling and readable logs by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4166
* ğŸŒ± e2e-tests: fix/cleanup and add test to validate webhooks outside of the manager namespace by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4167
* :book: remove from getting started the link for watching resources since this doc acctually document predicates by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4169
* ğŸ“– Add new documentation explaining the usage of Pprof by @TAM360 in https://github.com/kubernetes-sigs/kubebuilder/pull/4160
* ğŸ“– : add documentation about kubebuilder:scaffold  marker by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4173
* âœ¨ (go/v4): e2e tests: add data collection on failures and code simplification by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4175
* ğŸ“– Revamp "Watching Resources" documentation for accuracy and clarifty by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4170
* :book: Update README.md - Clarify that monthly Kubebuilder sync meetings are scheduled but most syncing happens offline via Slack by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4172
* ğŸ“– add note to clarify markers in the doc by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4174
* ğŸ› cleanup: remove func APIPackagePathLegacy which is no longer used since release 4.0.0 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4182
* ğŸ“– (doc) remove from menu Appendix: The TODO Landing Page by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4186
* ğŸ“– (doc): remove section in the platform documentation which says that kube-rbac-proxy is an image provided by default by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4187
* ğŸŒ± add to be ignored .DS_Store by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4189
* âš ï¸ ğŸ›fix: remove duplicate HasFragment method, replaced by HasFileContentWith by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4191
* ğŸ› Fix HasResource pkg method to properly stop when a match is found by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4190
* ğŸŒ±cleanup/refactor: Implement and refactor e2e tests for 'alpha generate' command by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4181
* ğŸ“– (doc): remove Makefile Helpers by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4184
* :seedling: Bump github.com/gobuffalo/flect from 1.0.2 to 1.0.3 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4194
* âœ¨ (deploy-image/v1alpha): Improve tests scaffolded for the controllers by @mogsie in https://github.com/kubernetes-sigs/kubebuilder/pull/4197
* :warning:  (go/v4) decouple webhooks from APIs (Move Webhooks from `api/<version>` or `api/<group>/<version>` to `internal/webhook/<version>` or `internal/webhook/<group>/<version>`) by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4150
* âœ¨ Add support to scaffold controllers for External Types by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4171
* ğŸ“– docs: update migration_guide_gov3_to_gov4.md by @lorenzofelletti in https://github.com/kubernetes-sigs/kubebuilder/pull/4204
* ğŸŒ± fix: replace references to v3 package with v4 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4206
* :seedling: Bump golang.org/x/tools from 0.25.0 to 0.26.0 by @dependabot in https://github.com/kubernetes-sigs/kubebuilder/pull/4207
* âœ¨ Upgrade cert-manager  version used on the tests from v1.14.4 to v1.16.0 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4209
* ğŸ“–  small fixes for the doc Using External Resources by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4211
* ğŸ“– (doc) - refactory and clenup the Plugin section by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4185
* âœ¨ Upgrade controller-tools version from v0.16.1 to v0.16.4 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4215
* âš ï¸ cleanup/refactor: Alpha Generate command by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4180
* ğŸ› (go/v4,kustomize/v2): Fix problems by simplify scaffold and removing webhookcainjection_patch. Clarifying replacements for cert-manager by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4123
* âœ¨ Upgrade Prometheus Operator version used on the tests from v0.72.0 to 0.77.1 by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4212
* ğŸ“– Update roadmap_2024.md - Complete goal to align webhook scaffold with the latest changes in controller-runtime by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4216
* ğŸ“– (doc) - Fix typo issues in the tutorial scaffolded samples (replace  indicies with indices) by @monteiro-renato in https://github.com/kubernetes-sigs/kubebuilder/pull/4219
* ğŸ› fixed Duplicate Webhook Patch Entries when Creating Multiple Verâ€¦ by @Bharadwajshivam28 in https://github.com/kubernetes-sigs/kubebuilder/pull/4220
* âœ¨ Add support to scaffold webhooks for External Types by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4203
* âœ¨ Add Support for Scaffolding Webhooks for Core Types by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4210
* ğŸ› fix support for external types by allowing the domain be empty, and properly generate the sample for cert-manager. by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4217
* ğŸŒ± fix GoReleaser by adding permission to write content by @camilamacedo86 in https://github.com/kubernetes-sigs/kubebuilder/pull/4226

## New Contributors
* @TAM360 made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4078
* @Adembc made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4117
* @pgaxatte made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4133
* @rkosegi made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4165
* @lorenzofelletti made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4204
* @monteiro-renato made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4219
* @Bharadwajshivam28 made their first contribution in https://github.com/kubernetes-sigs/kubebuilder/pull/4220

**Full Changelog**: https://github.com/kubernetes-sigs/kubebuilder/compare/v4.2.0...v4.3.0  
## prometheus/prometheus  
### Release notes for 2.55.0 / 2024-10-22  
#### [prometheus v2.55.0](https://github.com/prometheus/prometheus/releases/tag/v2.55.0)  
#### 2024-10-22  
## What's Changed
* [FEATURE] PromQL: Add experimental `info` function. #14495
* [FEATURE] Support UTF-8 characters in label names - feature flag `utf8-names`. #14482, #14880, #14736, #14727
* [FEATURE] Scraping: Add the ability to set custom `http_headers` in config. #14817
* [FEATURE] Scraping: Support feature flag `created-timestamp-zero-ingestion` in OpenMetrics. #14356, #14815
* [FEATURE] Scraping: `scrape_failure_log_file` option to log failures to a file. #14734
* [FEATURE] OTLP receiver: Optional promotion of resource attributes to series labels. #14200
* [FEATURE] Remote-Write: Support Google Cloud Monitoring authorization. #14346
* [FEATURE] Promtool: `tsdb create-blocks` new option to add labels. #14403
* [FEATURE] Promtool: `promtool test` adds `--junit` flag to format results. #14506
* [FEATURE] TSDB: Add `delayed-compaction` feature flag, for people running many Prometheus to randomize timing. #12532
* [ENHANCEMENT] OTLP receiver: Warn on exponential histograms with zero count and non-zero sum. #14706
* [ENHANCEMENT] OTLP receiver: Interrupt translation on context cancellation/timeout. #14612
* [ENHANCEMENT] Remote Read client: Enable streaming remote read if the server supports it. #11379
* [ENHANCEMENT] Remote-Write: Don't reshard if we haven't successfully sent a sample since last update. #14450
* [ENHANCEMENT] PromQL: Delay deletion of `__name__` label to the end of the query evaluation. This is **experimental** and enabled under the feature-flag `promql-delayed-name-removal`. #14477
* [ENHANCEMENT] PromQL: Experimental `sort_by_label` and `sort_by_label_desc` sort by all labels when label is equal. #14655, #14985
* [ENHANCEMENT] PromQL: Clarify error message logged when Go runtime panic occurs during query evaluation. #14621
* [ENHANCEMENT] PromQL: Use Kahan summation for better accuracy in `avg` and `avg_over_time`. #14413
* [ENHANCEMENT] Tracing: Improve PromQL tracing, including showing the operation performed for aggregates, operators, and calls. #14816
* [ENHANCEMENT] API: Support multiple listening addresses. #14665
* [ENHANCEMENT] TSDB: Backward compatibility with upcoming index v3. #14934
* [PERF] TSDB: Query in-order and out-of-order series together. #14354, #14693, #14714, #14831, #14874, #14948, #15120
* [PERF] TSDB: Streamline reading of overlapping out-of-order head chunks. #14729
* [BUGFIX] PromQL: make sort_by_label stable. #14985
* [BUGFIX] SD: Fix dropping targets (with feature flag `new-service-discovery-manager`). #13147
* [BUGFIX] SD: Stop storing stale targets (with feature flag `new-service-discovery-manager`). #13622
* [BUGFIX] Scraping: exemplars could be dropped in protobuf scraping. #14810
* [BUGFIX] Remote-Write: fix metadata sending for experimental Remote-Write V2. #14766
* [BUGFIX] Remote-Write: Return 4xx not 5xx when timeseries has duplicate label. #14716
* [BUGFIX] Experimental Native Histograms: many fixes for incorrect results, panics, warnings. #14513, #14575, #14598, #14609, #14611, #14771, #14821
* [BUGFIX] TSDB: Only count unknown record types in `record_decode_failures_total` metric. #14042

## New Contributors
* @maxamins made their first contribution in https://github.com/prometheus/prometheus/pull/14346
* @cuiweiyuan made their first contribution in https://github.com/prometheus/prometheus/pull/14626
* @harshitasao made their first contribution in https://github.com/prometheus/prometheus/pull/14690
* @patilsuraj767 made their first contribution in https://github.com/prometheus/prometheus/pull/14403
* @riskrole made their first contribution in https://github.com/prometheus/prometheus/pull/14751
* @jcreixell made their first contribution in https://github.com/prometheus/prometheus/pull/14477
* @kevinrawal made their first contribution in https://github.com/prometheus/prometheus/pull/14765
* @electron0zero made their first contribution in https://github.com/prometheus/prometheus/pull/14650
* @shandongzhejiang made their first contribution in https://github.com/prometheus/prometheus/pull/14700

**Full Changelog**: https://github.com/prometheus/prometheus/compare/v2.54.1...v2.55.0  
## containerd/containerd  
### Release notes for containerd 2.0.0-rc.6  
#### [containerd v2.0.0-rc.6](https://github.com/containerd/containerd/releases/tag/v2.0.0-rc.6)  
#### 2024-10-24  
Welcome to the v2.0.0-rc.6 release of containerd!
*This is a pre-release of containerd*

The first major release of containerd 2.x focuses on the continued stability of
containerd's core feature set with an easy upgrade from containerd 1.x. This
release includes the stabilization of new features added in the last 1.x release
as well as the removal of features which were deprecated in 1.x. The goal is to
support the vast community of containerd users well into the future along with
their ever increasing deployment footprints and variety of use cases.

### Highlights

* Allow sections of Plugins to be merged, and not overwritten as entire sections. ([#9982](https://github.com/containerd/containerd/pull/9982))
* Add Update API for sandbox controller ([#9903](https://github.com/containerd/containerd/pull/9903))
* Configure otel from env instead of config.toml ([#8970](https://github.com/containerd/containerd/pull/8970))
* Enable NRI by default ([#9744](https://github.com/containerd/containerd/pull/9744))
* Add PluginInfo to introspection API ([#9442](https://github.com/containerd/containerd/pull/9442))
* Remove overlayfs volatile option on temp mounts ([#9555](https://github.com/containerd/containerd/pull/9555))
* Expose usage of deprecated features ([#9258](https://github.com/containerd/containerd/pull/9258))
* Use Intel ISA-L's igzip if available ([#9200](https://github.com/containerd/containerd/pull/9200))
* Introduce top level config migration ([#9223](https://github.com/containerd/containerd/pull/9223))
* Add image delete target ([#8989](https://github.com/containerd/containerd/pull/8989))
* Remove `LimitNOFILE` from `containerd.service` ([#8924](https://github.com/containerd/containerd/pull/8924))
* Add support for image expiration during garbage collection ([#9022](https://github.com/containerd/containerd/pull/9022))
* Reduce the contention between ref lock and boltdb lock in content store ([#8792](https://github.com/containerd/containerd/pull/8792))
* Remove "containerd.io/restart.logpath" label ([#8264](https://github.com/containerd/containerd/pull/8264))
* Remove `aufs` snapshotter ([#8263](https://github.com/containerd/containerd/pull/8263))
* Fix deadlock during NRI plugin registration ([containerd/nri#79](https://github.com/containerd/nri/pull/79))
* Fix deadlock when writing to pipe blocks ([containerd/ttrpc#168](https://github.com/containerd/ttrpc/pull/168))

#### Build and Release Toolchain

* Generate attestation for artifacts during release ([#10543](https://github.com/containerd/containerd/pull/10543))
* Remove `cri-containerd-*.tar.gz` release bundles ([#9096](https://github.com/containerd/containerd/pull/9096))

#### Container Runtime Interface (CRI)

* Use 'UserSpecifiedImage' from CRI to set the image-name annotation ([#10747](https://github.com/containerd/containerd/pull/10747))
* Fine-grained SupplementalGroups control ([#9737](https://github.com/containerd/containerd/pull/9737))
* Add support to set loopback to up ([#10238](https://github.com/containerd/containerd/pull/10238))
* Add support for multiple subscribers to CRI container events ([#9661](https://github.com/containerd/containerd/pull/9661))
* Enable CDI by default ([#9621](https://github.com/containerd/containerd/pull/9621))
* Remove non-sandboxed CRI implementation ([#9228](https://github.com/containerd/containerd/pull/9228))
* Add support for userns in stateless and stateful pods with idmap mounts (KEP-127, k8s >= 1.27) ([#8287](https://github.com/containerd/containerd/pull/8287))
* Use sandboxed CRI by default ([#8994](https://github.com/containerd/containerd/pull/8994))
* Implement RuntimeConfig CRI call ([#8722](https://github.com/containerd/containerd/pull/8722))
* Add support for user namespaces (KEP-127) ([#8803](https://github.com/containerd/containerd/pull/8803))
* Remove CRI v1alpha2 ([#8276](https://github.com/containerd/containerd/pull/8276))

#### Go client

* Add api Go module and move all protos under api ([#10151](https://github.com/containerd/containerd/pull/10151))
* Move packages based on contributing guide ([#9365](https://github.com/containerd/containerd/pull/9365))
* Generalize plugin library ([#9214](https://github.com/containerd/containerd/pull/9214))
* Use github.com/containerd/log ([#9086](https://github.com/containerd/containerd/pull/9086))

#### Image Distribution

* Support to syncfs after pull by using diff plugin ([#10284](https://github.com/containerd/containerd/pull/10284))
* Skip "unknown" in image platform listing ([#10257](https://github.com/containerd/containerd/pull/10257))
* Update unpacker to fetch all provided content ([#10202](https://github.com/containerd/containerd/pull/10202))
* Enable Transfer service API to support plain HTTP ([#10024](https://github.com/containerd/containerd/pull/10024))
* Enable Transfer service to use registry configuration directory ([#9908](https://github.com/containerd/containerd/pull/9908))
* Disable the support for Schema 1 images ([#9765](https://github.com/containerd/containerd/pull/9765))
* Update Transfer service to add OCI descriptors to Progress structure ([#9630](https://github.com/containerd/containerd/pull/9630))
* Update import and export to allow references to missing content  ([#9554](https://github.com/containerd/containerd/pull/9554))
* Add option to perform syncfs after pull ([#9401](https://github.com/containerd/containerd/pull/9401))
* Add image verifier transfer service plugin system based on a binary directory ([#8493](https://github.com/containerd/containerd/pull/8493))

#### Runtime

* Implement  RuntimeStatus.features.supplemental_groups_policy from KEP-3619 ([#10410](https://github.com/containerd/containerd/pull/10410))
* Add pprof to runc-shim ([#10242](https://github.com/containerd/containerd/pull/10242))
* Provide runtime options in plugin info ([#10251](https://github.com/containerd/containerd/pull/10251))
* Store bootstrap parameters in sandbox metadata ([#9736](https://github.com/containerd/containerd/pull/9736))
* Update apparmor to allow confined runc to kill containers ([#10123](https://github.com/containerd/containerd/pull/10123))
* Support vsock connection to task api ([#9738](https://github.com/containerd/containerd/pull/9738))
* Update RuntimeDefault seccomp profile to disallow io_uring related syscalls ([#9320](https://github.com/containerd/containerd/pull/9320))
* Switch runc shim to task service v3 and fix restore ([#9233](https://github.com/containerd/containerd/pull/9233))
* Add sandboxer configuration and move sandbox controllers to plugins ([#8268](https://github.com/containerd/containerd/pull/8268))
* Add annotations to CreateSandbox request ([#8960](https://github.com/containerd/containerd/pull/8960))
* Add SandboxMetrics ([#8680](https://github.com/containerd/containerd/pull/8680))
* Publish sandbox events ([#8602](https://github.com/containerd/containerd/pull/8602))
* Remove the CriuPath field from runc's options ([#8279](https://github.com/containerd/containerd/pull/8279))
* Remove `io.containerd.runtime.v1.linux` and `io.containerd.runc.v1` ([#8262](https://github.com/containerd/containerd/pull/8262))

#### Security Advisories

* [medium] RAPL accessible to a container [GHSA-7ww5-4wqc-m92c](https://github.com/containerd/containerd/security/advisories/GHSA-7ww5-4wqc-m92c)

#### Breaking

* Remove `disable_cgroup` from CRI config ([#10594](https://github.com/containerd/containerd/pull/10594))
* Disable the support for Schema 1 images ([#9765](https://github.com/containerd/containerd/pull/9765))
* Update RuntimeDefault seccomp profile to disallow io_uring related syscalls ([#9320](https://github.com/containerd/containerd/pull/9320))
* Move client to subpackage ([#9316](https://github.com/containerd/containerd/pull/9316))
* Remove `LimitNOFILE` from `containerd.service` ([#8924](https://github.com/containerd/containerd/pull/8924))
* Remove CRI v1alpha2 ([#8276](https://github.com/containerd/containerd/pull/8276))
* Remove `io.containerd.runtime.v1.linux` and `io.containerd.runc.v1` ([#8262](https://github.com/containerd/containerd/pull/8262))
* Remove "containerd.io/restart.logpath" label ([#8264](https://github.com/containerd/containerd/pull/8264))
* Remove `aufs` snapshotter ([#8263](https://github.com/containerd/containerd/pull/8263))

#### Deprecations

* Update warnings for deprecated CRI config fields ([#10509](https://github.com/containerd/containerd/pull/10509))
* Add type alias for event Envelope ([#10279](https://github.com/containerd/containerd/pull/10279))
* Postpone removal of deprecated CRI config properties ([#9966](https://github.com/containerd/containerd/pull/9966))
* Deprecate go-plugin configuration option ([#9238](https://github.com/containerd/containerd/pull/9238))
* CNI conf_template in CRI is no longer deprecated ([#8637](https://github.com/containerd/containerd/pull/8637))

Please try out the release binaries and report any issues at
https://github.com/containerd/containerd/issues.

### Contributors

* Derek McGowan
* Akihiro Suda
* Maksym Pavlenko
* Wei Fu
* Phil Estes
* Sebastiaan van Stijn
* Samuel Karp
* Stefan Berger
* Krisztian Litkey
* Kazuyoshi Kato
* Rodrigo Campos
* Austin Vazquez
* Danny Canter
* Abel Feng
* Mike Brown
* Akhil Mohan
* Kirtana Ashok
* Iceber Gu
* Gabriel Adrian Samfira
* Jin Dong
* Kohei Tokunaga
* Bjorn Neergaard
* Brian Goff
* Justin Chadwell
* rongfu.leng
* James Sturtevant
* Davanum Srinivas
* Paul "TBBle" Hampson
* Henry Wang
* Enrico Weigelt
* Laura Brehm
* Marat Radchenko
* PaweÅ‚ Gronowski
* Shingo Omura
* Hsing-Yu (David) Chen
* Ilya Hanov
* Cardy.Tang
* Swagat Bora
* Aditi Sharma
* Amit Barve
* Bryant Biggs
* Evan Lezar
* James Jenkins
* Jordan Liggitt
* Kay Yan
* Markus Lehtonen
* Nashwan Azhari
* Shuaiyi Zhang
* Vinayak Goyal
* helen
* Alexandru Matei
* Anthony Nandaa
* Avi Deitcher
* Charity Kathure
* Cory Snider
* Ed Bartosh
* Etienne Champetier
* Kevin Parsons
* Michael Zappa
* Milas Bowman
* lengrongfu
* ningmingxiao
* yanggang
* zounengren
* Aditya Ramani
* Adrian Reber
* Amir M. Ghazanfari
* Artem Khramov
* Brad Davidson
* Chen Yiyang
* Christian Muehlhaeuser
* Djordje Lukic
* Edgar Lee
* Eric Lin
* Ethan Lowman
* Jiang Liu
* June Rhodes
* Kern Walster
* Lei Jitang
* Lucas Rattz
* Mahamed Ali
* Maksim An
* Michael Crosby
* Peteris Rudzusiks
* Ray Burgemeestre
* Sam Edwards
* Samruddhi Khandale
* Sascha Grunert
* Steve Griffith
* Tony Fang
* VERNOU CÃ©dric
* Vishal Reddy Gurrala
* Xiaojin Zhang
* hang.jiang
* harshitasao
* jerryzhuang
* roman-kiselenko
* zhanluxianshen
* Aaron Lehmann
* AbdelrahmanElawady
* Adrien Delorme
* Alex Couture-Beil
* Alex Ellis
* Alex Rodriguez
* Angelos Kolaitis
* Antonio Huete Jimenez
* Antonio Ojea
* Antti Kervinen
* Arash Haghighat
* Ben Foster
* Benjamin Peterson
* Bin Tang
* Bin Xin
* BinBin He
* Brennan Kinney
* Changqing Li
* ChengenH
* ChengyuZhu6
* Christian Stewart
* Colin O'Dell
* Craig Ingram
* Daisy Rong
* David Porter
* Derek Nola
* Eng Zer Jun
* Erikson Tung
* Fabiano FidÃªncio
* Fahed Dorgaa
* Gabriela Cervantes
* Gary McDonald
* Iain Macdonald
* James Lakin
* Jan Dubois
* Jaroslav Jindrak
* Javier Maestro
* Jian Wang
* Jiongchi Yu
* Julien Balestra
* Kir Kolyshkin
* Kirill A. Korinsky
* Konstantin Khlebnikov
* Lei Liu
* Matteo Pulcini
* Mauri de Souza Meneguzzo
* Mike Baynton
* Pan Yibo
* Paul Meyer
* Qasim Sarfraz
* Qiutong Song
* Reinhard Tartler
* Robbie Buxton
* Robert-AndrÃ© Mauchin
* Ruihua Wen
* Saket Jajoo
* Sameer
* Shengjing Zhu
* Shiming Zhang
* Shukui Yang
* StepSecurity Bot
* Talon
* Tariq Ibrahim
* Tianon Gravi
* Tim Hockin
* TinaMor
* Tobias Klauser
* TomÃ¡Å¡ Virtus
* TÃµnis Tiigi
* Wang Xinwen
* William Chen
* Xinyang Ge
* Yang Yang
* Yibo Zhuang
* Yuhang Wei
* Yury Gargay
* Zechun Chen
* Zhang Tianyang
* Zoe
* baijia
* bo.jiang
* bzsuni
* charles-chenzz
* chschumacher1994
* cormick
* guangli.bao
* guangwu
* jinda.ljd
* jingtao.liang
* krglosse
* pigletfly
* rokkiter
* wangxiang
* zhangpeng
* zhaojizhuang
* å´å°ç™½
* å¼ é’°
* æ²ˆé™µ
* è°­ä¹é¼

### Dependency Changes

* **dario.cat/mergo**                                                              v1.0.1 **_new_**
* **github.com/AdaLogics/go-fuzz-headers**                                         1f10f66a31bf -> ced1acdcaa24
* **github.com/AdamKorcz/go-118-fuzz-build**                                       5330a85ea652 -> 8075edf89bb0
* **github.com/Microsoft/go-winio**                                                v0.6.0 -> v0.6.2
* **github.com/Microsoft/hcsshim**                                                 v0.10.0-rc.7 -> v0.12.8
* **github.com/cenkalti/backoff/v4**                                               v4.2.0 -> v4.3.0
* **github.com/cespare/xxhash/v2**                                                 v2.2.0 -> v2.3.0
* **github.com/checkpoint-restore/checkpointctl**                                  v1.2.1 **_new_**
* **github.com/checkpoint-restore/go-criu/v7**                                     v7.2.0 **_new_**
* **github.com/cilium/ebpf**                                                       v0.9.1 -> v0.11.0
* **github.com/containerd/cgroups/v3**                                             v3.0.1 -> v3.0.3
* **github.com/containerd/console**                                                v1.0.3 -> v1.0.4
* **github.com/containerd/containerd/api**                                         v1.8.0-rc.4 **_new_**
* **github.com/containerd/continuity**                                             v0.3.0 -> v0.4.3
* **github.com/containerd/errdefs**                                                v0.3.0 **_new_**
* **github.com/containerd/errdefs/pkg**                                            v0.3.0 **_new_**
* **github.com/containerd/go-cni**                                                 v1.1.9 -> v1.1.10
* **github.com/containerd/go-runc**                                                v1.0.0 -> v1.1.0
* **github.com/containerd/imgcrypt**                                               v1.1.7 -> v1.2.0-rc1
* **github.com/containerd/log**                                                    v0.1.0 **_new_**
* **github.com/containerd/nri**                                                    v0.3.0 -> v0.7.0
* **github.com/containerd/otelttrpc**                                              ea5083fda723 **_new_**
* **github.com/containerd/platforms**                                              v0.2.1 **_new_**
* **github.com/containerd/plugin**                                                 v0.1.0 **_new_**
* **github.com/containerd/ttrpc**                                                  v1.2.1 -> b5cd6e4b3287
* **github.com/containerd/typeurl/v2**                                             v2.1.0 -> v2.2.0
* **github.com/containernetworking/cni**                                           v1.1.2 -> v1.2.3
* **github.com/containernetworking/plugins**                                       v1.2.0 -> v1.5.1
* **github.com/containers/ocicrypt**                                               v1.1.6 -> v1.2.0
* **github.com/cpuguy83/go-md2man/v2**                                             v2.0.2 -> v2.0.5
* **github.com/davecgh/go-spew**                                                   v1.1.1 -> d8f796af33cc
* **github.com/distribution/reference**                                            v0.6.0 **_new_**
* **github.com/emicklei/go-restful/v3**                                            v3.10.1 -> v3.11.0
* **github.com/felixge/httpsnoop**                                                 v1.0.4 **_new_**
* **github.com/fsnotify/fsnotify**                                                 v1.6.0 -> v1.7.0
* **github.com/fxamacker/cbor/v2**                                                 v2.7.0 **_new_**
* **github.com/go-jose/go-jose/v4**                                                v4.0.2 **_new_**
* **github.com/go-logr/logr**                                                      v1.2.3 -> v1.4.2
* **github.com/golang/protobuf**                                                   v1.5.2 -> v1.5.4
* **github.com/google/go-cmp**                                                     v0.5.9 -> v0.6.0
* **github.com/google/uuid**                                                       v1.3.0 -> v1.6.0
* **github.com/gorilla/websocket**                                                 v1.5.0 **_new_**
* **github.com/grpc-ecosystem/go-grpc-middleware/providers/prometheus**            v1.0.1 **_new_**
* **github.com/grpc-ecosystem/go-grpc-middleware/v2**                              v2.1.0 **_new_**
* **github.com/grpc-ecosystem/grpc-gateway/v2**                                    v2.7.0 -> v2.22.0
* **github.com/intel/goresctrl**                                                   v0.3.0 -> v0.8.0
* **github.com/klauspost/compress**                                                v1.16.0 -> v1.17.11
* **github.com/mdlayher/socket**                                                   v0.4.1 **_new_**
* **github.com/mdlayher/vsock**                                                    v1.2.1 **_new_**
* **github.com/moby/spdystream**                                                   v0.2.0 -> v0.4.0
* **github.com/moby/sys/mountinfo**                                                v0.6.2 -> v0.7.2
* **github.com/moby/sys/sequential**                                               v0.5.0 -> v0.6.0
* **github.com/moby/sys/signal**                                                   v0.7.0 -> v0.7.1
* **github.com/moby/sys/symlink**                                                  v0.2.0 -> v0.3.0
* **github.com/moby/sys/user**                                                     v0.3.0 **_new_**
* **github.com/moby/sys/userns**                                                   v0.1.0 **_new_**
* **github.com/munnerz/goautoneg**                                                 a7dc8b61c822 **_new_**
* **github.com/mxk/go-flowrate**                                                   cca7078d478f **_new_**
* **github.com/opencontainers/image-spec**                                         3a7f492d3f1b -> v1.1.0
* **github.com/opencontainers/runtime-spec**                                       v1.1.0-rc.1 -> v1.2.0
* **github.com/opencontainers/runtime-tools**                                      946c877fa809 -> 2e043c6bd626
* **github.com/opencontainers/selinux**                                            v1.11.0 -> v1.11.1
* **github.com/pelletier/go-toml/v2**                                              v2.2.3 **_new_**
* **github.com/pmezard/go-difflib**                                                v1.0.0 -> 5d4384ee4fb2
* **github.com/prometheus/client_golang**                                          v1.14.0 -> v1.20.5
* **github.com/prometheus/client_model**                                           v0.3.0 -> v0.6.1
* **github.com/prometheus/common**                                                 v0.37.0 -> v0.55.0
* **github.com/prometheus/procfs**                                                 v0.8.0 -> v0.15.1
* **github.com/sirupsen/logrus**                                                   v1.9.0 -> v1.9.3
* **github.com/stefanberger/go-pkcs11uri**                                         78d3cae3a980 -> 78284954bff6
* **github.com/stretchr/testify**                                                  v1.8.2 -> v1.9.0
* **github.com/urfave/cli/v2**                                                     v2.27.5 **_new_**
* **github.com/vishvananda/netlink**                                               v1.2.1-beta.2 -> v1.3.0
* **github.com/vishvananda/netns**                                                 2eb08e3e575f -> v0.0.4
* **github.com/x448/float16**                                                      v0.8.4 **_new_**
* **github.com/xrash/smetrics**                                                    686a1a2994c1 **_new_**
* **go.etcd.io/bbolt**                                                             v1.3.7 -> v1.3.11
* **go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc**  v0.40.0 -> v0.56.0
* **go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp**                v0.56.0 **_new_**
* **go.opentelemetry.io/otel**                                                     v1.14.0 -> v1.31.0
* **go.opentelemetry.io/otel/exporters/otlp/otlptrace**                            v1.14.0 -> v1.31.0
* **go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc**              v1.14.0 -> v1.31.0
* **go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp**              v1.14.0 -> v1.31.0
* **go.opentelemetry.io/otel/metric**                                              v0.37.0 -> v1.31.0
* **go.opentelemetry.io/otel/sdk**                                                 v1.14.0 -> v1.31.0
* **go.opentelemetry.io/otel/trace**                                               v1.14.0 -> v1.31.0
* **go.opentelemetry.io/proto/otlp**                                               v0.19.0 -> v1.3.1
* **golang.org/x/crypto**                                                          v0.1.0 -> v0.28.0
* **golang.org/x/exp**                                                             aacd6d4b4611 **_new_**
* **golang.org/x/mod**                                                             v0.7.0 -> v0.21.0
* **golang.org/x/net**                                                             v0.7.0 -> v0.30.0
* **golang.org/x/oauth2**                                                          v0.4.0 -> v0.22.0
* **golang.org/x/sync**                                                            v0.1.0 -> v0.8.0
* **golang.org/x/sys**                                                             v0.6.0 -> v0.26.0
* **golang.org/x/term**                                                            v0.5.0 -> v0.25.0
* **golang.org/x/text**                                                            v0.7.0 -> v0.19.0
* **golang.org/x/time**                                                            90d013bbcef8 -> v0.3.0
* **google.golang.org/genproto/googleapis/api**                                    5fefd90f89a9 **_new_**
* **google.golang.org/genproto/googleapis/rpc**                                    5fefd90f89a9 **_new_**
* **google.golang.org/grpc**                                                       v1.53.0 -> v1.67.1
* **google.golang.org/protobuf**                                                   v1.28.1 -> v1.35.1
* **k8s.io/api**                                                                   v0.26.2 -> v0.31.1
* **k8s.io/apimachinery**                                                          v0.26.2 -> v0.31.1
* **k8s.io/apiserver**                                                             v0.26.2 -> v0.31.1
* **k8s.io/client-go**                                                             v0.26.2 -> v0.31.1
* **k8s.io/component-base**                                                        v0.26.2 -> v0.31.1
* **k8s.io/cri-api**                                                               v0.26.2 -> v0.32.0-alpha.0
* **k8s.io/klog/v2**                                                               v2.90.1 -> v2.130.1
* **k8s.io/kubelet**                                                               v0.31.1 **_new_**
* **k8s.io/utils**                                                                 a5ecb0141aa5 -> 18e509b52bc8
* **sigs.k8s.io/json**                                                             f223a00ba0e2 -> bc3834ca7abd
* **sigs.k8s.io/structured-merge-diff/v4**                                         v4.2.3 -> v4.4.1
* **sigs.k8s.io/yaml**                                                             v1.3.0 -> v1.4.0
* **tags.cncf.io/container-device-interface**                                      v0.8.0 **_new_**
* **tags.cncf.io/container-device-interface/specs-go**                             v0.8.0 **_new_**

Previous release can be found at [v1.7.0](https://github.com/containerd/containerd/releases/tag/v1.7.0)
### Which file should I download?
* `containerd-<VERSION>-<OS>-<ARCH>.tar.gz`:         âœ…Recommended. Dynamically linked with glibc 2.31 (Ubuntu 20.04).
* `containerd-static-<VERSION>-<OS>-<ARCH>.tar.gz`:  Statically linked. Expected to be used on non-glibc Linux distributions. Not position-independent.

In addition to containerd, typically you will have to install [runc](https://github.com/opencontainers/runc/releases)
and [CNI plugins](https://github.com/containernetworking/plugins/releases) from their official sites too.

See also the [Getting Started](https://github.com/containerd/containerd/blob/main/docs/getting-started.md) documentation.
  
### Release notes for containerd API 1.8.0-rc.4  
#### [containerd api/v1.8.0-rc.4](https://github.com/containerd/containerd/releases/tag/api/v1.8.0-rc.4)  
#### 2024-10-23  
Welcome to the api/v1.8.0-rc.4 release of containerd!
*This is a pre-release of containerd*

The first dedicated release for the containerd API. This release continues the 1.x
line of API compatibility with the 9th minor release of the 1.x API.

### Highlights

* Add Update API for sandbox controller ([#9903](https://github.com/containerd/containerd/pull/9903))
* Add PluginInfo to introspection API ([#9442](https://github.com/containerd/containerd/pull/9442))
* Expose usage of deprecated features ([#9258](https://github.com/containerd/containerd/pull/9258))
* Add image delete target ([#8989](https://github.com/containerd/containerd/pull/8989))

#### Go client

* Add api Go module and move all protos under api ([#10151](https://github.com/containerd/containerd/pull/10151))

#### Image Distribution

* Enable Transfer service API to support plain HTTP ([#10024](https://github.com/containerd/containerd/pull/10024))
* Enable Transfer service to use registry configuration directory ([#9908](https://github.com/containerd/containerd/pull/9908))
* Update Transfer service to add OCI descriptors to Progress structure ([#9630](https://github.com/containerd/containerd/pull/9630))
* Add option to perform syncfs after pull ([#9401](https://github.com/containerd/containerd/pull/9401))

#### Runtime

* Store bootstrap parameters in sandbox metadata ([#9736](https://github.com/containerd/containerd/pull/9736))
* Add sandboxer configuration and move sandbox controllers to plugins ([#8268](https://github.com/containerd/containerd/pull/8268))
* Add annotations to CreateSandbox request ([#8960](https://github.com/containerd/containerd/pull/8960))
* Add SandboxMetrics ([#8680](https://github.com/containerd/containerd/pull/8680))
* Publish sandbox events ([#8602](https://github.com/containerd/containerd/pull/8602))

#### Deprecations

* Add type alias for event Envelope ([#10279](https://github.com/containerd/containerd/pull/10279))

Please try out the release binaries and report any issues at
https://github.com/containerd/containerd/issues.

### Contributors

* Derek McGowan
* Maksym Pavlenko
* Wei Fu
* Abel Feng
* Akihiro Suda
* Phil Estes
* Danny Canter
* Samuel Karp
* Kohei Tokunaga
* Sebastiaan van Stijn
* Akhil Mohan
* Brian Goff
* Bryant Biggs
* Davanum Srinivas
* Iceber Gu
* Kirtana Ashok

### Changes
<details><summary>63 commits</summary>
<p>

* Clean up some dependency trees for runc shim ([#10757](https://github.com/containerd/containerd/pull/10757))
  * [`2123855ee`](https://github.com/containerd/containerd/commit/2123855eeb399dfcbb152ca3502e8fb4322d06cb) Add build tag to omit grpc
* Add Update API for sandbox controller ([#9903](https://github.com/containerd/containerd/pull/9903))
  * [`15887d7ef`](https://github.com/containerd/containerd/commit/15887d7efc60e4bde9e65c87a0376d94e9f6eb04) sandbox: add update api for controller
* api: update github.com/containerd/ttrpc v1.2.5 to be aligned with containerd ([#10366](https://github.com/containerd/containerd/pull/10366))
  * [`cb38b1e2b`](https://github.com/containerd/containerd/commit/cb38b1e2be065ea9e248e03906ee893f954370d8) api: update github.com/containerd/ttrpc v1.2.5
* Add type alias for event Envelope ([#10279](https://github.com/containerd/containerd/pull/10279))
  * [`3e71ccafc`](https://github.com/containerd/containerd/commit/3e71ccafc48bc87a054f4ce3a67ecf2df91932c5) Add type alias for event Envelope
* Update api minimum Go version to 1.21 ([#10276](https://github.com/containerd/containerd/pull/10276))
  * [`359d84351`](https://github.com/containerd/containerd/commit/359d84351d53d335688ab96c1a3e1ae0151b3a2d) Update api minimum go version to 1.21
* Prepare release notes for api/v1.8.0-rc.0 ([#10167](https://github.com/containerd/containerd/pull/10167))
  * [`55fcebffc`](https://github.com/containerd/containerd/commit/55fcebffc76e642e9155eda5e097043f95109e4d) Prepare release notes for api/v1.8.0
* Add api Go module and move all protos under api ([#10151](https://github.com/containerd/containerd/pull/10151))
  * [`2ac2b9c90`](https://github.com/containerd/containerd/commit/2ac2b9c909fb64f4d06958a0ca2f556bec348d05) Make api a Go sub-module
  * [`3e9cace72`](https://github.com/containerd/containerd/commit/3e9cace720cee5eb631c8291d8fb51928dc3fb3b) Move runtimeoptions to api directory
  * [`4a4550777`](https://github.com/containerd/containerd/commit/4a455077722796fd6a63253bc30d2b4c0c379d1d) Move runc options to api directory
* Store bootstrap parameters in sandbox metadata ([#9736](https://github.com/containerd/containerd/pull/9736))
  * [`de38490ed`](https://github.com/containerd/containerd/commit/de38490ed6b8d9cb9cb6ea7cfcd0071e8f27d304) sandbox: merge address and protocol to one url
  * [`f6e0cf189`](https://github.com/containerd/containerd/commit/f6e0cf1894b9211f07d801e1af3166f290969cd7) sandbox: add address info in Start and Status response
* Enable Transfer service API to support plain HTTP ([#10024](https://github.com/containerd/containerd/pull/10024))
  * [`433279438`](https://github.com/containerd/containerd/commit/4332794384253ad85a05a17fe42aa929f62fc72a) Transfer: Registry: Enable plain HTTP
* Enable Transfer service to use registry configuration directory ([#9908](https://github.com/containerd/containerd/pull/9908))
  * [`7a3b7fba5`](https://github.com/containerd/containerd/commit/7a3b7fba59a9ff9e8756976cf6f55117b1814a63) Transfer: Registry: Enable to use registry configuration diretory
* Generate proto services with go-ttrpc ([#7609](https://github.com/containerd/containerd/pull/7609))
  * [`f0e874941`](https://github.com/containerd/containerd/commit/f0e8749411301e99958e0caf545d85bf0112dda4) Add ttrpc generated services
  * [`65031eade`](https://github.com/containerd/containerd/commit/65031eadec262d783db25456a8bbca1eed1956b7) Update protobuild to build ttrpc services
* Add OSVersion to platform protobuf ([#9733](https://github.com/containerd/containerd/pull/9733))
  * [`5aa05481d`](https://github.com/containerd/containerd/commit/5aa05481ddd40138eef79ec4bce2b0232adef354) Add OSVersion to platform protobuf
* Move Message proto to types ([#9742](https://github.com/containerd/containerd/pull/9742))
  * [`0facc8592`](https://github.com/containerd/containerd/commit/0facc85925a114edac4b3b05a871f4ad205f45f1) Fix proto formatting
  * [`7f2d2c4f4`](https://github.com/containerd/containerd/commit/7f2d2c4f44afe090872301cc8614e8fc0d432e9e) Move Message proto to types
* refactor: move plugin/fieldpath to api/types/ ([#9687](https://github.com/containerd/containerd/pull/9687))
  * [`b16e3572a`](https://github.com/containerd/containerd/commit/b16e3572a308be0c58b3c810b1922ec8d444d1f7) refactor: move plugin/fieldpath to api/types/
* Add PluginInfo to introspection API ([#9442](https://github.com/containerd/containerd/pull/9442))
  * [`22d586e51`](https://github.com/containerd/containerd/commit/22d586e515654d3a901c40443fb2b4adcad65827) api/services/instrospection: add PluginInfo
* Update Transfer service to add OCI descriptors to Progress structure ([#9630](https://github.com/containerd/containerd/pull/9630))
  * [`a2472c0b5`](https://github.com/containerd/containerd/commit/a2472c0b5ab17e46ab3f3b000a6fa512a45d7f05) transfer: add OCI descriptors to Progress structure
* Add option to perform syncfs after pull ([#9401](https://github.com/containerd/containerd/pull/9401))
  * [`bd5c602c4`](https://github.com/containerd/containerd/commit/bd5c602c4dc91d19976f2dc222a337ab76716750) api: introduce sync_fs to diff.ApplyRequest
* Containerd v2 module ([#9306](https://github.com/containerd/containerd/pull/9306))
  * [`5fdf55e49`](https://github.com/containerd/containerd/commit/5fdf55e493d68079d22a08de1a7afe522e5838e5) Update go module to github.com/containerd/containerd/v2
* Expose usage of deprecated features ([#9258](https://github.com/containerd/containerd/pull/9258))
  * [`57c897f10`](https://github.com/containerd/containerd/commit/57c897f10df48556af799f71c85a91b889df2d70) api/introspection: deprecation warnings in server
* Add sandboxer configuration and move sandbox controllers to plugins ([#8268](https://github.com/containerd/containerd/pull/8268))
  * [`d2d434b7d`](https://github.com/containerd/containerd/commit/d2d434b7d6546842b1f791ef17392da99320265d) sandbox: add all sandbox information to Create method
  * [`f372b3501`](https://github.com/containerd/containerd/commit/f372b3501b6096c8228203f9d5d5aae8ff998d61) sandbox: add sandboxer field of sandbox requests
* Add image delete target ([#8989](https://github.com/containerd/containerd/pull/8989))
  * [`f8fb2dad3`](https://github.com/containerd/containerd/commit/f8fb2dad39a4b45ce1de59f236e72ee72ad53cf7) api: update image service to support target in delete request
* fix: Add `containerd` to the message type reference ([#9126](https://github.com/containerd/containerd/pull/9126))
  * [`42eee8bf0`](https://github.com/containerd/containerd/commit/42eee8bf05c89524a29f064cb4ce0a460a8c0081) fix: Add `containerd` to the message type reference
* platforms: isolate from errdefs and api dependencies ([#9095](https://github.com/containerd/containerd/pull/9095))
  * [`e916d77c8`](https://github.com/containerd/containerd/commit/e916d77c81b8a61d7a37276e310b4a150b04f4ab) platforms: move ToProto, FromProto to api/types
* Add annotations to CreateSandbox request ([#8960](https://github.com/containerd/containerd/pull/8960))
  * [`939ccbed4`](https://github.com/containerd/containerd/commit/939ccbed427e81eaecd37777ddcb2eac792114e6) Sandbox: Add annotations to CreateSandbox surface
* archive: use 1970-01-01 as the whiteout timestamp ([#8764](https://github.com/containerd/containerd/pull/8764))
  * [`5dedb6d0d`](https://github.com/containerd/containerd/commit/5dedb6d0d2565507f0636254a18fdb7462a9eac3) archive: use 1970-01-01 as the whiteout timestamp
* Add SandboxMetrics ([#8680](https://github.com/containerd/containerd/pull/8680))
  * [`d278d37ca`](https://github.com/containerd/containerd/commit/d278d37caae501ef18fd919e611610c639ad471b) Sandbox: Add Metrics rpc for controller
  * [`d56722ef2`](https://github.com/containerd/containerd/commit/d56722ef2a42953841728f5ed5666da776ce0d8f) Sandbox: Add SandboxMetrics rpc
* Publish sandbox events ([#8602](https://github.com/containerd/containerd/pull/8602))
  * [`65906335b`](https://github.com/containerd/containerd/commit/65906335bf086dfe4ed73fbddb90429047e8aa96) Add sandbox events protos
* Cleanup protobuild config ([#8278](https://github.com/containerd/containerd/pull/8278))
  * [`0bbca7f1b`](https://github.com/containerd/containerd/commit/0bbca7f1bcc29933dfd3cb3c463cc4fb8fbbe036) Cleanup protobuild config
</p>
</details>

### Dependency Changes

* **github.com/containerd/log**                  v0.1.0 **_new_**
* **github.com/containerd/ttrpc**                v1.2.1 -> v1.2.5
* **github.com/containerd/typeurl/v2**           v2.1.0 -> v2.1.1
* **github.com/golang/protobuf**                 v1.5.2 -> v1.5.3
* **github.com/opencontainers/image-spec**       3a7f492d3f1b -> v1.1.0
* **github.com/sirupsen/logrus**                 v1.9.0 -> v1.9.3
* **golang.org/x/net**                           v0.7.0 -> v0.23.0
* **golang.org/x/sys**                           v0.6.0 -> v0.18.0
* **golang.org/x/text**                          v0.7.0 -> v0.14.0
* **google.golang.org/genproto/googleapis/rpc**  c3f982113cda **_new_**
* **google.golang.org/grpc**                     v1.53.0 -> v1.59.0
* **google.golang.org/protobuf**                 v1.28.1 -> v1.33.0

Previous release can be found at [v1.7.0](https://github.com/containerd/containerd/releases/tag/v1.7.0)
  
## containerd/nerdctl  
### Release notes for v2.0.0-rc.3  
#### [nerdctl v2.0.0-rc.3](https://github.com/containerd/nerdctl/releases/tag/v2.0.0-rc.3)  
#### 2024-10-24  
## Changes
nerdctl v2 enables "detach-netns" for Rootless mode by default (#2723).

This will bring:
- Faster and more stable `nerdctl pull`, `nerdctl push`, `nerdctl build`, etc
- Proper support for `nerdctl pull 127.0.0.1:.../...`
- Proper support for `nerdctl run --net=host`

Depends on RootlessKit >= v2.0 and BuildKit >= v0.13 (included in `nerdctl-full-*.tar.gz`).

> [!NOTE]
> After upgrading nerdctl (rootless mode) from v1.x to v2.x, it is highly recommended to
> re-install the systemd units and the configurations:
> ```
> containerd-rootless-setuptool.sh uninstall
> rm -rf ~/.config/{nerdctl,buildkit}
> containerd-rootless-setuptool.sh install
> CONTAINERD_NAMESPACE=default containerd-rootless-setuptool.sh install-buildkit-containerd
> ```

Other major changes:
- `nerdctl run`:
  - Added `--systemd` flag for running systemd in containers flag (#2785, thanks to @sazzy4o)
  - Added `--ipc=(shareable|container:<container>)` flag (#2757, thanks to @minuk-dev)
  - Added `--annotation` flag (#2906)
     - Now `nerdctl run --label` is only set as a containerd label and not propagated as an OCI annotation. A label with the `nerdctl/` prefix can no longer be set manually, with an exception for `nerdctl/bypass4netns`. The `nerdctl/bypass4netns` label is still allowed and is propagated to an OCI annotation, for sake of compatibility.
  - Added `--sig-proxy` flag (#3043, thanks to @CodeChanning)
  - Propagate image labels to container labels (not to container annotations) (#3023, thanks to @yankay)
  - Added `--attach` flag (#3157, thanks to @CodeChanning)
  - The restriction for `--name` is relaxed to support longer names (#3279, thanks to @Shubhranshu153)
  - Added `--security-opt systempaths=unconfined` flag (#3533, thanks to @austinvazquez)
  - Added `--network ns:<PATH>` flag (#3538, thanks to @dancavallaro)
  - Added the support for oci-layout image references (#3537, thanks to @austinvazquez)
- `nerdctl build`:
  - Added `--attest`, `--sbom`, and `--provenance` flags (#2786, thanks to @yankay)
  - Added `--pull` flag (#3074, thanks to @sondavidb)
  - Added the support for Windows (#2587, thanks to @TBBle)
  - Added the support for oci-layout build contexts (#3327, thanks to @austinvazquez)
- `nerdctl ps`:
  - JSON type of `--format=json` is changed for better Docker compatibility (#2987, #3058, thanks to @apostasie and @yankay)
- `nerdctl inspect`:
  - Added `--size` flag (#3021, thanks to @apostasie)
- `nerdctl network`:
  - The networks are now aware of containerd namespaces. i.e., `nerdctl --namespace=foo network list` no longer shows networks created with `nerdctl --namespace=bar network create` (#3096, thanks to @apostasie)
  - Enhanced support for DHCP (#3001, thanks to @apostasie)
- `nerdctl compose up`:
  - Added `--abort-on-container-exit` flag (#2873, thanks to @alegrey91)
- `nerdctl builder prune`:
  - Added `--all` flag (#3316, thanks to @austinvazquez)
  - Added `--force` flag (#3316, thanks to @austinvazquez)
- `nerdctl image prune`:
  - Added `--filter` flag (#3319, thanks to @austinvazquez)
- `nerdctl image load`:
  - Added `--quiet` flag (#3551, thanks to @austinvazquez)
- nerdct-full:
  - Updated the components. See the `Included components` below.
  - Removed IPFS (Kubo). Can be still installed manually. (#3532, thanks to @yankay)
- Misc:
  - Refactoring and stability improvements (Many PRs, thanks to @apostasie et al.)
- And more!

Full changes: https://github.com/containerd/nerdctl/milestone/37?closed=1
Thanks to @CerberusQc @CodeChanning @Iceber @Shikachuu @Shubhranshu153 @TBBle @THLIVSQAZ @TinaMor @abitrolly @alegrey91 @apostasie @austinvazquez @bobcallaway @cezar-r @chews93319 @curlwget @dancavallaro @djdongjin @dmcgowan @fahedouch @frits-v @fwilhe2 @haytok @jmpargana @kebe7jun @ktock @lingdie @manugupt1 @midnight-wonderer @minuk-dev @monirul @pendo324 @qianxi0410 @roman-kiselenko @sazzy4o @sondavidb @testwill @thaJeztah @xyz-li @yankay @zjumoon01 @zwpaper

## Compatible containerd versions
This release of nerdctl is expected to be used with containerd v1.6, v1.7, or v2.0.

## About the binaries
- Minimal (`nerdctl-2.0.0-rc.3-linux-amd64.tar.gz`): nerdctl only
- Full (`nerdctl-full-2.0.0-rc.3-linux-amd64.tar.gz`):    Includes dependencies such as containerd, runc, and CNI

### Minimal
Extract the archive to a path like `/usr/local/bin` or `~/bin` .
<details><summary>tar Cxzvvf /usr/local/bin nerdctl-2.0.0-rc.3-linux-amd64.tar.gz</summary>
<p>

```
-rwxr-xr-x root/root  26316952 2024-10-24 12:51 nerdctl
-rwxr-xr-x root/root     22657 2024-10-24 12:50 containerd-rootless-setuptool.sh
-rwxr-xr-x root/root      8708 2024-10-24 12:50 containerd-rootless.sh
```
</p>
</details>

### Full
Extract the archive to a path like `/usr/local` or `~/.local` .

<details><summary>tar Cxzvvf /usr/local nerdctl-full-2.0.0-rc.3-linux-amd64.tar.gz</summary>
<p>

```
drwxr-xr-x 0/0               0 2024-10-24 12:58 bin/
-rwxr-xr-x 0/0        29866025 2015-10-21 00:00 bin/buildctl
-rwxr-xr-x 0/0        23724032 2022-09-05 09:52 bin/buildg
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-LICENSE -> ../libexec/cni/LICENSE
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-README.md -> ../libexec/cni/README.md
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-bandwidth -> ../libexec/cni/bandwidth
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-bridge -> ../libexec/cni/bridge
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-dhcp -> ../libexec/cni/dhcp
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-dummy -> ../libexec/cni/dummy
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-firewall -> ../libexec/cni/firewall
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-host-device -> ../libexec/cni/host-device
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-host-local -> ../libexec/cni/host-local
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-ipvlan -> ../libexec/cni/ipvlan
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-loopback -> ../libexec/cni/loopback
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-macvlan -> ../libexec/cni/macvlan
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-portmap -> ../libexec/cni/portmap
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-ptp -> ../libexec/cni/ptp
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-sbr -> ../libexec/cni/sbr
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-static -> ../libexec/cni/static
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-tap -> ../libexec/cni/tap
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-tuning -> ../libexec/cni/tuning
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-vlan -> ../libexec/cni/vlan
lrwxrwxrwx 0/0               0 2024-10-24 12:57 bin/buildkit-cni-vrf -> ../libexec/cni/vrf
-rwxr-xr-x 0/0        59727892 2015-10-21 00:00 bin/buildkitd
-rwxr-xr-x 0/0        15311568 2024-10-24 12:56 bin/bypass4netns
-rwxr-xr-x 0/0         5882008 2024-10-24 12:56 bin/bypass4netnsd
-rwxr-xr-x 0/0        38794352 2024-10-24 12:57 bin/containerd
-rwxr-xr-x 0/0         9474048 2023-11-02 17:34 bin/containerd-fuse-overlayfs-grpc
-rwxr-xr-x 0/0           22657 2024-10-24 12:56 bin/containerd-rootless-setuptool.sh
-rwxr-xr-x 0/0            8708 2024-10-24 12:56 bin/containerd-rootless.sh
-rwxr-xr-x 0/0         7708824 2024-10-24 12:57 bin/containerd-shim-runc-v2
-rwxr-xr-x 0/0        45903872 2023-10-31 08:57 bin/containerd-stargz-grpc
-rwxr-xr-x 0/0        21810318 2024-10-24 12:57 bin/ctd-decoder
-rwxr-xr-x 0/0        19697816 2024-10-24 12:57 bin/ctr
-rwxr-xr-x 0/0        31136840 2024-10-24 12:57 bin/ctr-enc
-rwxr-xr-x 0/0        19931136 2023-10-31 08:58 bin/ctr-remote
-rwxr-xr-x 0/0         1789968 2024-10-24 12:57 bin/fuse-overlayfs
-rwxr-xr-x 0/0        26284184 2024-10-24 12:56 bin/nerdctl
-rwxr-xr-x 0/0        11346380 2024-08-17 19:28 bin/rootlessctl
-rwxr-xr-x 0/0        13089548 2024-08-17 19:28 bin/rootlesskit
-rwxr-xr-x 0/0        15967360 2024-10-24 12:56 bin/runc
-rwxr-xr-x 0/0         2354520 2024-10-24 12:57 bin/slirp4netns
-rwxr-xr-x 0/0          870496 2024-10-24 12:57 bin/tini
drwxr-xr-x 0/0               0 2024-10-24 12:57 lib/
drwxr-xr-x 0/0               0 2024-10-24 12:57 lib/systemd/
drwxr-xr-x 0/0               0 2024-10-24 12:57 lib/systemd/system/
-rw-r--r-- 0/0            1325 2024-10-24 12:57 lib/systemd/system/buildkit.service
-rw-r--r-- 0/0            1264 2024-10-24 12:55 lib/systemd/system/containerd.service
-rw-r--r-- 0/0             312 2024-10-24 12:57 lib/systemd/system/stargz-snapshotter.service
drwxr-xr-x 0/0               0 2024-10-24 12:57 libexec/
drwxr-xr-x 0/0               0 2024-10-24 12:57 libexec/cni/
-rw-r--r-- 0/0           11357 2024-10-15 09:37 libexec/cni/LICENSE
-rw-r--r-- 0/0            2343 2024-10-15 09:37 libexec/cni/README.md
-rwxr-xr-x 0/0         4648054 2024-10-15 09:36 libexec/cni/bandwidth
-rwxr-xr-x 0/0         5283567 2024-10-15 09:37 libexec/cni/bridge
-rwxr-xr-x 0/0        12771199 2024-10-15 09:37 libexec/cni/dhcp
-rwxr-xr-x 0/0         4843811 2024-10-15 09:37 libexec/cni/dummy
-rwxr-xr-x 0/0         5312426 2024-10-15 09:36 libexec/cni/firewall
-rwxr-xr-x 0/0         4784447 2024-10-15 09:37 libexec/cni/host-device
-rwxr-xr-x 0/0         4047543 2024-10-15 09:37 libexec/cni/host-local
-rwxr-xr-x 0/0         4860660 2024-10-15 09:37 libexec/cni/ipvlan
-rwxr-xr-x 0/0         4107060 2024-10-15 09:37 libexec/cni/loopback
-rwxr-xr-x 0/0         4896553 2024-10-15 09:37 libexec/cni/macvlan
-rwxr-xr-x 0/0         4703145 2024-10-15 09:36 libexec/cni/portmap
-rwxr-xr-x 0/0         5068216 2024-10-15 09:37 libexec/cni/ptp
-rwxr-xr-x 0/0         4330463 2024-10-15 09:36 libexec/cni/sbr
-rwxr-xr-x 0/0         3648356 2024-10-15 09:37 libexec/cni/static
-rwxr-xr-x 0/0         4920887 2024-10-15 09:37 libexec/cni/tap
-rwxr-xr-x 0/0         4195353 2024-10-15 09:36 libexec/cni/tuning
-rwxr-xr-x 0/0         4854297 2024-10-15 09:37 libexec/cni/vlan
-rwxr-xr-x 0/0         4481459 2024-10-15 09:36 libexec/cni/vrf
drwxr-xr-x 0/0               0 2024-10-24 12:57 share/
drwxr-xr-x 0/0               0 2024-10-24 12:57 share/doc/
drwxr-xr-x 0/0               0 2024-10-24 12:57 share/doc/nerdctl/
-rw-r--r-- 0/0           12101 2024-10-24 12:50 share/doc/nerdctl/README.md
drwxr-xr-x 0/0               0 2024-10-24 12:50 share/doc/nerdctl/docs/
-rw-r--r-- 0/0            3953 2024-10-24 12:50 share/doc/nerdctl/docs/build.md
-rw-r--r-- 0/0            2570 2024-10-24 12:50 share/doc/nerdctl/docs/builder-debug.md
-rw-r--r-- 0/0            4779 2024-10-24 12:50 share/doc/nerdctl/docs/cni.md
-rw-r--r-- 0/0           77544 2024-10-24 12:50 share/doc/nerdctl/docs/command-reference.md
-rw-r--r-- 0/0            1814 2024-10-24 12:50 share/doc/nerdctl/docs/compose.md
-rw-r--r-- 0/0            5329 2024-10-24 12:50 share/doc/nerdctl/docs/config.md
-rw-r--r-- 0/0            9128 2024-10-24 12:50 share/doc/nerdctl/docs/cosign.md
-rw-r--r-- 0/0            5660 2024-10-24 12:50 share/doc/nerdctl/docs/cvmfs.md
drwxr-xr-x 0/0               0 2024-10-24 12:50 share/doc/nerdctl/docs/dev/
-rw-r--r-- 0/0            8587 2024-10-24 12:50 share/doc/nerdctl/docs/dev/store.md
-rw-r--r-- 0/0            2776 2024-10-24 12:50 share/doc/nerdctl/docs/dir.md
-rw-r--r-- 0/0             906 2024-10-24 12:50 share/doc/nerdctl/docs/experimental.md
-rw-r--r-- 0/0           14217 2024-10-24 12:50 share/doc/nerdctl/docs/faq.md
-rw-r--r-- 0/0             884 2024-10-24 12:50 share/doc/nerdctl/docs/freebsd.md
-rw-r--r-- 0/0            3273 2024-10-24 12:50 share/doc/nerdctl/docs/gpu.md
drwxr-xr-x 0/0               0 2024-10-24 12:50 share/doc/nerdctl/docs/images/
-rw-r--r-- 0/0            1540 2024-10-24 12:50 share/doc/nerdctl/docs/images/nerdctl-white.svg
-rw-r--r-- 0/0            1462 2024-10-24 12:50 share/doc/nerdctl/docs/images/nerdctl.svg
-rw-r--r-- 0/0          684421 2024-10-24 12:50 share/doc/nerdctl/docs/images/rootlessKit-network-design.png
-rw-r--r-- 0/0           14462 2024-10-24 12:50 share/doc/nerdctl/docs/ipfs.md
-rw-r--r-- 0/0            1755 2024-10-24 12:50 share/doc/nerdctl/docs/multi-platform.md
-rw-r--r-- 0/0            2960 2024-10-24 12:50 share/doc/nerdctl/docs/notation.md
-rw-r--r-- 0/0            2596 2024-10-24 12:50 share/doc/nerdctl/docs/nydus.md
-rw-r--r-- 0/0            3277 2024-10-24 12:50 share/doc/nerdctl/docs/ocicrypt.md
-rw-r--r-- 0/0            1876 2024-10-24 12:50 share/doc/nerdctl/docs/overlaybd.md
-rw-r--r-- 0/0           15657 2024-10-24 12:50 share/doc/nerdctl/docs/registry.md
-rw-r--r-- 0/0            8707 2024-10-24 12:50 share/doc/nerdctl/docs/rootless.md
-rw-r--r-- 0/0            2015 2024-10-24 12:50 share/doc/nerdctl/docs/soci.md
-rw-r--r-- 0/0           10312 2024-10-24 12:50 share/doc/nerdctl/docs/stargz.md
drwxr-xr-x 0/0               0 2024-10-24 12:50 share/doc/nerdctl/docs/testing/
-rw-r--r-- 0/0            4115 2024-10-24 12:50 share/doc/nerdctl/docs/testing/README.md
-rw-r--r-- 0/0           15068 2024-10-24 12:50 share/doc/nerdctl/docs/testing/tools.md
drwxr-xr-x 0/0               0 2024-10-24 12:58 share/doc/nerdctl-full/
-rw-r--r-- 0/0            1010 2024-10-24 12:58 share/doc/nerdctl-full/README.md
-rw-r--r-- 0/0            9022 2024-10-24 12:58 share/doc/nerdctl-full/SHA256SUMS
```
</p>
</details>

<details><summary>Included components</summary>
<p>

See `share/doc/nerdctl-full/README.md`:
```markdown
# nerdctl (full distribution)
- nerdctl: v2.0.0-rc.3
- containerd: v2.0.0-rc.6
- runc: v1.2.0
- CNI plugins: v1.6.0
- BuildKit: v0.16.0
- Stargz Snapshotter: v0.15.1
- imgcrypt: v1.1.11
- RootlessKit: v2.3.1
- slirp4netns: v1.3.1
- bypass4netns: v0.4.1
- fuse-overlayfs: v1.14
- containerd-fuse-overlayfs: v1.0.8
- Tini: v0.19.0
- buildg: v0.4.1

## License
- bin/slirp4netns:    [GNU GENERAL PUBLIC LICENSE, Version 2](https://github.com/rootless-containers/slirp4netns/blob/v1.3.1/COPYING)
- bin/fuse-overlayfs: [GNU GENERAL PUBLIC LICENSE, Version 2](https://github.com/containers/fuse-overlayfs/blob/v1.14/COPYING)
- bin/{runc,bypass4netns,bypass4netnsd}: Apache License 2.0, statically linked with libseccomp ([LGPL 2.1](https://github.com/seccomp/libseccomp/blob/main/LICENSE), source code available at https://github.com/seccomp/libseccomp/)
- bin/tini: [MIT License](https://github.com/krallin/tini/blob/v0.19.0/LICENSE)
- Other files: [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0)
```
</p>
</details>

## Quick start
### Rootful
```console
$ sudo systemctl enable --now containerd
$ sudo nerdctl run -d --name nginx -p 80:80 nginx:alpine
```

### Rootless
```console
$ containerd-rootless-setuptool.sh install
$ nerdctl run -d --name nginx -p 8080:80 nginx:alpine
```

Enabling cgroup v2 is highly recommended for rootless mode, see https://rootlesscontaine.rs/getting-started/common/cgroup2/ .
- - -
The binaries were built automatically on GitHub Actions.
The build log is available for 90 days: https://github.com/containerd/nerdctl/actions/runs/11499655077

The sha256sum of the SHA256SUMS file itself is `147010c5987e04e23e1275975a35b8f2f751760cce0b18a25a1f045df49bda0f` .
- - -
Release manager: @AkihiroSuda   
